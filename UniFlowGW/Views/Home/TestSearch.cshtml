
@{
    ViewData["Title"] = "TestSearch";
}
<link rel="stylesheet" href="~/css/bs3subdropdown.css" />
<script type="text/javascript" src="~/js/searcher.js"></script>
<script type="text/javascript">
    var schema = {
        columns: [
            { name: "文本列", type: "text" },
            { name: "数值列", type: "double" },
            { name: "日期列", type: "date" },
            { name: "选项列", type: "text" },
        ]
    }
    var searchConfig = {
        items: [
            { key: "文本列", searchable: true },
            { key: "数值列", searchable: true },
            { key: "日期列", searchable: true },
            { key: "选项列", searchable: true, optList: { "key1": "选项1", "key2": "选项2", "key3": "选项3" } },
        ]
    }
    var viewConfig = {
        items: [
            { key: "文本列", header: "文本内容", },
        ]
    }

    var queryList = [
        { key: "文本列", op: "EQ", val: "哈哈" },
    ]

    var searcher = {}
    $(document).ready(function () {
        searcher = new Searcher($('#search'),
            new Schema(schema),
            new SearchConfig(searchConfig),
            new ViewConfig(viewConfig),
            queryList);
    });

    function dosearch() {
        var query = searcher.collectQuery();
        //$("#search_query").val(b64encode(JSON.stringify(query)));
        // return pageTo(1);
        $("<div>").text(JSON.stringify(query)).appendTo($("body"));
        return false;
    }
</script>
<h2>TestSearch</h2>
<form class="form-inline" id="searchForm" style="">
    <input name="pageNo" id="pageNo" type="hidden" value="${pager.pageNo}">
    <input name="pageSize" id="pageSize" type="hidden" value="${pager.pageSize}">
    <input name="orderBy" id="orderBy" type="hidden" value="${pager.orderBy}">
    <input name="queryB64" id="search_query" type="hidden" value="${search.queryB64}">

    <div id="search" class="xcolumns">
    </div>
    <a class="btn btn-primary pull-right" id="btnSubmit"
       onclick="return dosearch(); return false;" type="submit" value="查询">
        查询
    </a>
    <div class="clearfix"></div>
</form>
